define("async",[],function(){function a(a){var b,c;b=document.createElement("script"),b.type="text/javascript",b.async=!0,b.src=a,c=document.getElementsByTagName("script")[0],c.parentNode.insertBefore(b,c)}function b(a,b){var c=/!(.+)/,e=a.replace(c,""),f=c.test(a)?a.replace(/.+!/,""):d;return e+=e.indexOf("?")<0?"?":"&",e+f+"="+b}function c(){return e+=1,"__async_req_"+e+"__"}var d="callback",e=0;return{load:function(d,e,f,g){if(g.isBuild)f(null);else{var h=c();window[h]=f,a(b(e.toUrl(d),h))}}}}),require.config({paths:{async:"++resource++plone.formwidget.geolocation/async"}}),require(["jquery","async!http://maps.google.com/maps/api/js?v=3&libraries=places&key=AIzaSyAtTLEerLeB1gS4J3VG1z3AV5xrvIWHHpU"],function(a){function b(b){a.each(b,function(){a(this).attr("readonly",!0)})}function c(a,b,c,d,e,f){var g=a.getPosition(),h=g.lat(),i=g.lng();b.val(h),c.val(i),zoomLevel=f.getZoom(),d.val(zoomLevel),e.data("latitude",h),e.data("longitude",i)}a(document).on("geowidget:init",function(d){var e=a(d.target);if(!e.data("geolocationfield")){e.data("geolocationfield",!0);var f=e.is(".edit");a(".geolocation-data",e).hide();var g=a(".geolocation",e),h=a(".geolocationfield-field.latitude",e),i=a(".geolocationfield-field.longitude",e),j=a(".geolocationfield-field.zoom",e),k=parseFloat(h.val())||g.data("latitude"),l=parseFloat(i.val())||g.data("longitude"),m=parseInt(j.val(),10)||parseInt(g.data("zoom"),10);g.addClass("mapActive").css({width:"100%",height:"400px"});var n={lat:k,lng:l},o=new google.maps.Map(g.get(0),{zoom:m,center:n}),p=new google.maps.LatLng(k,l),q=new google.maps.Marker({map:o,anchorPoint:new google.maps.Point(0,(-29)),draggable:f,animation:google.maps.Animation.DROP});if(q.setPosition(p),f){b([h,i]);var r=a(".map-search-input",e);r.show(),google.maps.event.addDomListener(r.get(0),"keydown",function(a){13===a.keyCode&&(a.preventDefault(),a.stopPropagation())});var s=new google.maps.places.Autocomplete(r.get(0));s.bindTo("bounds",o),google.maps.event.addListener(o,"zoom_changed",function(){zoomLevel=o.getZoom(),j.val(zoomLevel)});var t=a(".infowindow-content",e),u=new google.maps.InfoWindow,v=t.get(0);u.setContent(v),s.addListener("place_changed",function(){u.close(),q.setVisible(!1);var a=s.getPlace();if(a.geometry){a.geometry.viewport?o.fitBounds(a.geometry.viewport):(o.setCenter(a.geometry.location),o.setZoom(m)),q.setPosition(a.geometry.location),q.setVisible(!0);var b="";a.address_components&&(b=[a.address_components[0]&&a.address_components[0].short_name||"",a.address_components[1]&&a.address_components[1].short_name||"",a.address_components[2]&&a.address_components[2].short_name||""].join(" "),c(q,h,i,j,g,o)),t.find(".place-icon").attr("src",a.icon),t.find(".place-name").text(a.name),t.find(".place-address").text(b),u.open(o,q)}}),q.addListener("dragend",function(a){c(q,h,i,j,g,o)})}}}),a(".geolocation_wrapper.edit,.geolocation_wrapper.view").trigger("geowidget:init")}),define("/Users/keul/buildout/test5.1/src/plone.formwidget.geolocation/plone/formwidget/geolocation/browser/static/plone.formwidget.geolocation.js",function(){});
//# sourceMappingURL=compiled-plone-formwidget-geolocation.js.map